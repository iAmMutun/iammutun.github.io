<html lang="en" class=""><head>
    <meta charset="UTF-8">

    <title>Web Audio Visualizer</title>

<style class="cp-pen-styles">html, body{
width: 100%;
height: 100%;
padding: 0;
margin: 0;
background-color:#222;
font-size: 0;
}

svg{
display: block;
width: 100%;
height: 100%;
padding: 0;
margin: 0;
position:absolute;

}

h1{
width: 100%;
font-family: sans-serif;
position:absolute;
text-align:center;
color:white;
font-size: 18px;
top: 40%;
opacity: 1;
transition: opacity 1s ease-in-out;
-moz-transition: opacity 1s ease-in-out;
-webkit-transition: opacity 1s ease-in-out;
}

h1 a{
    color: #48b1f4;
    text-decoration:none;
}
h2{
margin:0;
padding:0;
position:fixed;
bottom:0;
left:0;
font-family:sans-serif;
font-weight:normal;
font-size:12px;
color:black;
background:white;
}


path{
stroke-linecap: square;
stroke: white;
stroke-width: 0.5px;
}</style></head><body>
        <svg preserveAspectRatio="none" id="visualizer" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 255 255">
            <defs>

                <mask id="mask">
                    <g id="maskGroup">
                    </g>
                <path stroke-dasharray="4,1" d="M 0,255 l 0,-100"></path><path stroke-dasharray="4,1" d="M 1,255 l 0,-110"></path><path stroke-dasharray="4,1" d="M 2,255 l 0,-115"></path><path stroke-dasharray="4,1" d="M 3,255 l 0,-130"></path><path stroke-dasharray="4,1" d="M 4,255 l 0,-155"></path><path stroke-dasharray="4,1" d="M 5,255 l 0,-160"></path><path stroke-dasharray="4,1" d="M 6,255 l 0,-155"></path><path stroke-dasharray="4,1" d="M 7,255 l 0,-140"></path><path stroke-dasharray="4,1" d="M 8,255 l 0,-110"></path><path stroke-dasharray="4,1" d="M 9,255 l 0,-105"></path><path stroke-dasharray="4,1" d="M 10,255 l 0,-110"></path><path stroke-dasharray="4,1" d="M 11,255 l 0,-120"></path><path stroke-dasharray="4,1" d="M 12,255 l 0,-125"></path><path stroke-dasharray="4,1" d="M 13,255 l 0,-115"></path><path stroke-dasharray="4,1" d="M 14,255 l 0,-105"></path><path stroke-dasharray="4,1" d="M 15,255 l 0,-100"></path><path stroke-dasharray="4,1" d="M 16,255 l 0,-115"></path><path stroke-dasharray="4,1" d="M 17,255 l 0,-120"></path><path stroke-dasharray="4,1" d="M 18,255 l 0,-110"></path><path stroke-dasharray="4,1" d="M 19,255 l 0,-115"></path><path stroke-dasharray="4,1" d="M 20,255 l 0,-95"></path><path stroke-dasharray="4,1" d="M 21,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 22,255 l 0,-80"></path><path stroke-dasharray="4,1" d="M 23,255 l 0,-75"></path><path stroke-dasharray="4,1" d="M 24,255 l 0,-75"></path><path stroke-dasharray="4,1" d="M 25,255 l 0,-95"></path><path stroke-dasharray="4,1" d="M 26,255 l 0,-90"></path><path stroke-dasharray="4,1" d="M 27,255 l 0,-80"></path><path stroke-dasharray="4,1" d="M 28,255 l 0,-75"></path><path stroke-dasharray="4,1" d="M 29,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 30,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 31,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 32,255 l 0,-90"></path><path stroke-dasharray="4,1" d="M 33,255 l 0,-100"></path><path stroke-dasharray="4,1" d="M 34,255 l 0,-95"></path><path stroke-dasharray="4,1" d="M 35,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 36,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 37,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 38,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 39,255 l 0,-35"></path><path stroke-dasharray="4,1" d="M 40,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 41,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 42,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 43,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 44,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 45,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 46,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 47,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 48,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 49,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 50,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 51,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 52,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 53,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 54,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 55,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 56,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 57,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 58,255 l 0,-30"></path><path stroke-dasharray="4,1" d="M 59,255 l 0,-35"></path><path stroke-dasharray="4,1" d="M 60,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 61,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 62,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 63,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 64,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 65,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 66,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 67,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 68,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 69,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 70,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 71,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 72,255 l 0,-35"></path><path stroke-dasharray="4,1" d="M 73,255 l 0,-30"></path><path stroke-dasharray="4,1" d="M 74,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 75,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 76,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 77,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 78,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 79,255 l 0,-25"></path><path stroke-dasharray="4,1" d="M 80,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 81,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 82,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 83,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 84,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 85,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 86,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 87,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 88,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 89,255 l 0,-35"></path><path stroke-dasharray="4,1" d="M 90,255 l 0,-25"></path><path stroke-dasharray="4,1" d="M 91,255 l 0,-30"></path><path stroke-dasharray="4,1" d="M 92,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 93,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 94,255 l 0,-75"></path><path stroke-dasharray="4,1" d="M 95,255 l 0,-75"></path><path stroke-dasharray="4,1" d="M 96,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 97,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 98,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 99,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 100,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 101,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 102,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 103,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 104,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 105,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 106,255 l 0,-35"></path><path stroke-dasharray="4,1" d="M 107,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 108,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 109,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 110,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 111,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 112,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 113,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 114,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 115,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 116,255 l 0,-35"></path><path stroke-dasharray="4,1" d="M 117,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 118,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 119,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 120,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 121,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 122,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 123,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 124,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 125,255 l 0,-75"></path><path stroke-dasharray="4,1" d="M 126,255 l 0,-85"></path><path stroke-dasharray="4,1" d="M 127,255 l 0,-80"></path><path stroke-dasharray="4,1" d="M 128,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 129,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 130,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 131,255 l 0,-75"></path><path stroke-dasharray="4,1" d="M 132,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 133,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 134,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 135,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 136,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 137,255 l 0,-80"></path><path stroke-dasharray="4,1" d="M 138,255 l 0,-75"></path><path stroke-dasharray="4,1" d="M 139,255 l 0,-80"></path><path stroke-dasharray="4,1" d="M 140,255 l 0,-75"></path><path stroke-dasharray="4,1" d="M 141,255 l 0,-75"></path><path stroke-dasharray="4,1" d="M 142,255 l 0,-75"></path><path stroke-dasharray="4,1" d="M 143,255 l 0,-75"></path><path stroke-dasharray="4,1" d="M 144,255 l 0,-80"></path><path stroke-dasharray="4,1" d="M 145,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 146,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 147,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 148,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 149,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 150,255 l 0,-80"></path><path stroke-dasharray="4,1" d="M 151,255 l 0,-80"></path><path stroke-dasharray="4,1" d="M 152,255 l 0,-70"></path><path stroke-dasharray="4,1" d="M 153,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 154,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 155,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 156,255 l 0,-65"></path><path stroke-dasharray="4,1" d="M 157,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 158,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 159,255 l 0,-30"></path><path stroke-dasharray="4,1" d="M 160,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 161,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 162,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 163,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 164,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 165,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 166,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 167,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 168,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 169,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 170,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 171,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 172,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 173,255 l 0,-60"></path><path stroke-dasharray="4,1" d="M 174,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 175,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 176,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 177,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 178,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 179,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 180,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 181,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 182,255 l 0,-25"></path><path stroke-dasharray="4,1" d="M 183,255 l 0,-35"></path><path stroke-dasharray="4,1" d="M 184,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 185,255 l 0,-35"></path><path stroke-dasharray="4,1" d="M 186,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 187,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 188,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 189,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 190,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 191,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 192,255 l 0,-35"></path><path stroke-dasharray="4,1" d="M 193,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 194,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 195,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 196,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 197,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 198,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 199,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 200,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 201,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 202,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 203,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 204,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 205,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 206,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 207,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 208,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 209,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 210,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 211,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 212,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 213,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 214,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 215,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 216,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 217,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 218,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 219,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 220,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 221,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 222,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 223,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 224,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 225,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 226,255 l 0,-55"></path><path stroke-dasharray="4,1" d="M 227,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 228,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 229,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 230,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 231,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 232,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 233,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 234,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 235,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 236,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 237,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 238,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 239,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 240,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 241,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 242,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 243,255 l 0,-45"></path><path stroke-dasharray="4,1" d="M 244,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 245,255 l 0,-35"></path><path stroke-dasharray="4,1" d="M 246,255 l 0,-35"></path><path stroke-dasharray="4,1" d="M 247,255 l 0,-35"></path><path stroke-dasharray="4,1" d="M 248,255 l 0,-35"></path><path stroke-dasharray="4,1" d="M 249,255 l 0,-35"></path><path stroke-dasharray="4,1" d="M 250,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 251,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 252,255 l 0,-50"></path><path stroke-dasharray="4,1" d="M 253,255 l 0,-40"></path><path stroke-dasharray="4,1" d="M 254,255 l 0,-40"></path></mask>
                <linearGradient id="gradient" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#ff0a0a;stop-opacity:1"></stop>
                    <stop offset="20%" style="stop-color:#f1ff0a;stop-opacity:1"></stop>
                    <stop offset="90%" style="stop-color:#d923b9;stop-opacity:1"></stop>
                    <stop offset="100%" style="stop-color:#050d61;stop-opacity:1"></stop>
                </linearGradient>
            </defs>
            <rect x="0" y="0" width="100%" height="100%" fill="url(#gradient)" mask="url(#mask)"></rect>
        </svg>

<h1 style="opacity: 0;">Thanks</h1>
<h2 id="length">-</h2>
<script>window.onload = function () {
    "use strict";
    var paths = document.getElementsByTagName('path');
    var visualizer = document.getElementById('visualizer');
    var mask = visualizer.getElementById('mask');
    var h = document.getElementsByTagName('h1')[0];
    var path;
    var report = 0;

var h1 = document.getElementById('length');  












var currentColor = {r:0, g:0, b:0};
var targetColor  = {r:0, g:0, b:0};

function rgbToHex(color) {
    function toHex(c) {
        var hex = Math.floor(c * 256).toString(16);
        return hex.length == 1 ? "0" + hex : hex;
    }
    return "#" + toHex(color.r) + toHex(color.g) + toHex(color.b);
}

  
function randomColor() {
  var color = {r:0, g:0, b:0};
  
  color.r = Math.random();
  color.g = Math.random();
  color.b = Math.random();
 
  return color;
}
  
var previousW = [];
  
  var shouldHit = false;
  var hitPercentage = 0;














    var soundAllowed = function (stream) {
        //Audio stops listening in FF without // window.persistAudioStream = stream;
        //https://bugzilla.mozilla.org/show_bug.cgi?id=965483
        //https://support.mozilla.org/en-US/questions/984179
        window.persistAudioStream = stream;
        h.innerHTML = "Thanks";
        h.setAttribute('style', 'opacity: 0;');
        var audioContent = new AudioContext();
        var audioStream = audioContent.createMediaStreamSource(stream);
        var analyser = audioContent.createAnalyser();
        audioStream.connect(analyser);
        analyser.fftSize = 1024;

        var frequencyArray = new Uint8Array(analyser.frequencyBinCount);
        visualizer.setAttribute('viewBox', '0 0 255 255');

        //Through the frequencyArray has a length longer than 255, there seems to be no
        //significant data after this point. Not worth visualizing.
        for (var i = 0; i < 255; i++) {
            path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('stroke-dasharray', '4,1');
            mask.appendChild(path);
        }
        var doDraw = function () {
            requestAnimationFrame(doDraw);
            analyser.getByteFrequencyData(frequencyArray);

            
    var thisW = [];
    
    var bassCount = 0;
    var count = 0;
    var power = 0;


            var adjustedLength;
            for (var i = 0; i < 255; i++) {
                adjustedLength = Math.floor(frequencyArray[i]) - Math.floor(frequencyArray[i]) % 5;
                paths[i].setAttribute('d', 'M ' + i + ',255 l 0,-' + adjustedLength);



thisW[i] = adjustedLength;

      var diff = thisW[i] - previousW[i];
      
      if (diff > 0)
      {
        power += diff;
        count++;
        if (i < 50)
        {
          bassCount ++;
        }
      }

            }






            if (bassCount >= 12)
            {
            shouldHit = true;
            hitPercentage = Math.max(hitPercentage, power / 255 / count);
            }
            else
            {
            //percentage = 0;
            }
            h1.innerHTML = count + '<br>' + power;

            document.body.style.backgroundColor = rgbToHex(currentColor);
            
            previousW = thisW;








        };
        doDraw();
    };

    var soundNotAllowed = function (error) {
        h.innerHTML = "You must allow your microphone.";
        console.log(error);
    };








setInterval(function(){
  if (shouldHit)
      hitIt(hitPercentage);
  shouldHit = false;
}, 200);

function hitIt(percentage)
{
  var a, b;
  if (percentage > 0.1)
    {
      a = 0.2;
      b = 0.8;
    }
  else if (percentage > 0.05)
    {
      a = 0.3;
      b = 0.5;
    }
  else
    {
      a = 0.2;
      b = 0.4;
    }
  currentColor = randomColor();
  
  var select = Math.floor(Math.random() * 3);
  
  if (select == 1 || select == 2)
  {
    currentColor.r *= a;
    currentColor.r += b;
  }
  
  if (select == 2 || select == 3)
  {
    currentColor.g *= a;
    currentColor.g += b;
  }
  
  if (select == 1 || select == 3)
  {
    currentColor.b *= a;
    currentColor.b += b;
  }

  targetColor = currentColor;
  targetColor.r *= 0.5;
  targetColor.g *= 0.5;
  targetColor.b *= 0.5;
}

setInterval(function(){
  targetColor = randomColor();
  targetColor.r *= 0.2;
  targetColor.g *= 0.2;
  targetColor.b *= 0.2;
  targetColor.r += 0.2;
  targetColor.g += 0.2;
  targetColor.b += 0.2;
}, 1500);
  
setInterval(function(){
  currentColor.r = targetColor.r * 0.05 + currentColor.r * 0.95;
  currentColor.g = targetColor.g * 0.05 + currentColor.g * 0.95;
  currentColor.b = targetColor.b * 0.05 + currentColor.b * 0.95;
}, 1000/60);
  


























    navigator.getUserMedia({ audio: true }, soundAllowed, soundNotAllowed);

};
//# sourceURL=pen.js
</script>
</body></html>